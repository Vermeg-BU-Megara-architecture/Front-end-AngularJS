/**
 * angular-loading-button - v0.1.1 - 08/08/2014
 * Loading button directive for AngularJS
 * https://github.com/tiste/angular-loading-button
 * Licensed WTFPL
 */
angular.module("loadingButton",[]).factory("loadingButton",["$log",function(){return{dropper:function(a){return this.inc(a,.1*Math.random())},inc:function(a,b){return a=this.limit(a+b,.05,.95),this.set(a)},limit:function(a,b,c){var d=a;return b>a&&(d=b),a>c&&(d=c),d},set:function(a){return this.limit(a,.05,1)}}}]).directive("loadingButton",["$log","$interval","$timeout","loadingButton",function(a,b,c,d){return{restrict:"A",scope:{completed:"=lbCompleted",value:"=?lbValue"},link:function(a,e){"undefined"==typeof a.value&&(a.value=0);var f,g=!1,h=function(){g=!0,e.addClass("loading"),1!==a.value&&(f=b(function(){a.value<.95&&(a.value=d.dropper(a.value))},500))},i=function(d){a.completed=void 0,a.value=1,b.cancel(f),c(function(){e.removeClass("loading"),e.addClass(d?"success":"error")},400),c(function(){e.removeClass("success error"),g=!1,a.value=0},3e3)};e.bind("click",function(){g||h()}),a.$watch("completed",function(a){1==a?i(!0):0==a&&i(!1)}),a.$watch("value",function(a){a>0&&!g&&h()})}}}]);